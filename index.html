<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Music Practice App</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="stylesheet" href="/src/styles/main.css">
</head>
<body>
  <div id="app">
    <main class="main">
      <div class="score-container">
        <div id="score-display"></div>
        <div id="loading-message" class="message">
          <h2>Load a MusicXML file</h2>
          <div class="score-library">
            <div class="folder">
              <div class="folder-name">Final Fantasy VII Piano Collections</div>
              <div class="folder-contents">
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-01-Tifas-Theme.mxl">01 - Tifa's Theme</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-02-Main-Theme.mxl">02 - Main Theme</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-03-Cinco-de-Chocobo.mxl">03 - Cinco de Chocobo</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-04-Ahead-on-Our-Way.mxl">04 - Ahead on Our Way</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-05-Fighting.mxl">05 - Fighting</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-06-Cosmo-Canyon.mxl">06 - Cosmo Canyon</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-07-Gold-Saucer.mxl">07 - Gold Saucer</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-08-Farm-Boy.mxl">08 - Farm Boy</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-09-Rufus-Welcoming-Ceremony.mxl">09 - Rufus Welcoming Ceremony</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-10-J-E-N-O-V-A.mxl">10 - J-E-N-O-V-A</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-11-Aeriths-Theme.mxl">11 - Aerith's Theme</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-12-One-Winged-Angel.mxl">12 - One Winged Angel</div>
                <div class="score-item" data-path="scores/final fantasy vii piano collections/final-fantasy-vii-piano-collections-13-Descendent-of-Shinobi.mxl">13 - Descendent of Shinobi</div>
              </div>
            </div>
            <div class="folder">
              <div class="folder-name">Expedition 33 Clair Obscur</div>
              <div class="folder-contents">
                <div class="score-item" data-path="scores/expedition 33 clair obscur/alicia - clair obscur.mxl">Alicia</div>
                <div class="score-item" data-path="scores/expedition 33 clair obscur/verso - clair obscur.mxl">Verso</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="practice-panel">
        <button id="toggle-panel-btn" class="toggle-panel-btn">â—€</button>
        
        <div class="panel-content">
          <h1>Piano Play Along</h1>
          
          <div class="file-controls">
            <button id="load-file-btn" class="btn btn-primary">Upload MusicXML</button>
            <button id="clear-file-btn" class="btn" style="display: none;">Close Score</button>
          </div>

          <div class="settings-section">
            <h3>Settings</h3>
            <div class="settings-content">
              <div class="setting-item">
                <label for="midi-device-select">MIDI Device</label>
                <select id="midi-device-select" class="select" disabled>
                  <option value="">No MIDI device</option>
                </select>
              </div>
              <div class="setting-item">
                <label for="practice-mode-select">Practice Mode</label>
                <select id="practice-mode-select" class="select">
                  <option value="both">Both Hands</option>
                  <option value="right">Right Hand Only</option>
                  <option value="left">Left Hand Only</option>
                </select>
              </div>
              <div class="setting-item">
                <label for="zoom-select">Score Zoom</label>
                <select id="zoom-select" class="select">
                  <option value="0.8">X. Small</option>
                  <option value="1.0">Small</option>
                  <option value="1.25" selected>Normal</option>
                  <option value="1.5">Large</option>
                  <option value="1.75">X. Large</option>
                </select>
              </div>
              <div class="setting-item">
                <label for="keyboard-size-select">Keyboard Size</label>
                <select id="keyboard-size-select" class="select">
                  <option value="100" selected>Normal</option>
                  <option value="135">Large</option>
                  <option value="0">Hide</option>
                </select>
              </div>
              <div class="setting-item">
                <label for="show-note-names">Show Note Names</label>
                <input type="checkbox" id="show-note-names">
              </div>
            </div>
          </div>
        <div class="practice-controls">
          <button id="pause-btn" class="btn btn-warning" disabled>Pause</button>
          <button id="reset-btn" class="btn" disabled>Back to Start</button>
          </div>

          <div class="status-panel">
          <div class="status-item">
            <span class="label">Measure:</span>
            <span id="current-measure">-</span>
          </div>
          <div class="status-item">
            <span class="label">Progress:</span>
            <span id="progress">0%</span>
          </div>
          <div class="status-item">
            <span class="label">Next Notes:</span>
            <span id="next-notes">-</span>
          </div>
          </div>

          <div class="midi-status">
          <div class="status-indicator" id="midi-status">
            <span class="dot"></span>
            <span id="midi-status-text">MIDI: Not connected</span>
          </div>
          <div class="status-indicator" id="voice-status">
            <span class="dot"></span>
            <span id="voice-status-text">Voice: Listening</span>
          </div>
          </div>

          <div class="voice-commands">
          <h3>Voice Commands</h3>
          <ul>
            <li><strong>measure 4 / bar 4</strong> - jump to measure</li>
            <li><strong>back</strong> - previous measure</li>
            <li><strong>forward</strong> - next measure</li>
            <li><strong>start</strong> - back to start</li>
            <li><strong>left hand / right hand / both hands</strong> - change mode</li>
            <li><strong>mute</strong> - ignore commands</li>
            <li><strong>unmute</strong> - listen again</li>
          </ul>
          </div>
        </div>
      </div>
    </main>

    <div class="keyboard-container">
      <div id="piano-keyboard-container"></div>
    </div>
  </div>

  <input type="file" id="file-input" accept=".xml,.musicxml,.mxl" style="display: none;">
  <script type="module" src="/src/app.ts"></script>
</body>
</html>
